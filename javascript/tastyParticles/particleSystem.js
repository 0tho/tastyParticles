"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),ParticleSystem=function(){function t(){var i=arguments.length<=0||void 0===arguments[0]?600:arguments[0],e=arguments.length<=1||void 0===arguments[1]?600:arguments[1],s=arguments.length<=2||void 0===arguments[2]?1e3:arguments[2];_classCallCheck(this,t),this.width=i,this.height=e,this.maxParticles=s,this.particles=[],this.fields=[]}return _createClass(t,[{key:"start",value:function(){console.log("Start");var t;for(this.color=Color.random(),this.color.r*=1.5,this.color.g*=1.5,this.color.b*=1.5,this.color.a=.3,this.ang=Math.random()*(2*Math.PI),this.speed=1*Math.random()+2,this.cos=Math.cos(this.ang)*this.speed,this.sin=Math.sin(this.ang)*this.speed,t=0;10>t;t++){var i=new Field(void 0,1e4*Math.random()-1e3);i.position=new Vector3D(Math.random()*this.width,Math.random()*this.height,2e3*Math.random()-1e3),this.fields.push(i)}}},{key:"update",value:function(){var t;if(this.color=this.color.copy,this.color.r-=.3,this.color.g-=.3,this.color.b-=.3,this.particles.length<this.maxParticles)for(t=0;10>t;t++){var i=new Particle;i.position=new Vector3D(this.width>>1,this.height>>1,0),i.velocity=new Vector3D(this.cos+Math.random()>>1.75,this.sin+Math.random()>>1.75,.2*Math.random()-.1),i.color=this.color,this.particles.push(i)}for(t=0;t<this.particles.length;t++){var i=this.particles[t];i.submitToFields(this.fields),i.update()}}},{key:"draw",value:function(t,i){t.fillStyle="rgba(0,0,0,0.5)",t.fillRect(0,0,this.width,this.height);var e;for(e=0;e<this.particles.length;e++){var s=this.particles[e];s.draw(t)}}}]),t}();